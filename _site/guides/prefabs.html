<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Dash Docs - Prefabs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <!-- Le styles -->
    <link href="http://dash.circularstudios.com/assets/css/bootstrap.css" rel="stylesheet" />
    <style>
      /* 60px to make the container go all the way
      to the bottom of the topbar */
      body { padding-top: 60px; }
    </style>
    <link href="http://dash.circularstudios.com/assets/css/bootstrap-responsive.css" rel="stylesheet" />
    <link href="http://dash.circularstudios.com/assets/css/docs.css" rel="stylesheet" />
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" type="image/png" href="http://dash.circularstudios.com/assets/img/dash-logo.png" />
  </head>
  <body>
    <!--<a href="https://github.com/driftyco/jetstrap-docs"><img style="position: absolute; z-index: 10000; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>-->
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a href="index.html/" class="brand"><img src="http://dash.circularstudios.com/assets/img/Dash.png"></a>
          <ul class="nav pull-right">
            <li><a href="https://github.com/Circular-Studios/Dash">Dash on GitHub</a></li>
            <li><a href="http://dash.circularstudios.com/api/latest">API Documentation</a></li>
            <li><a href="http://circularstudios.com">Circular Studios</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="span3">
          <ul id="menu" class="nav nav-list" data-spy="affix">
            <li class="nav-header">DASH DOCS</li>
            <li data-section="index"><a href="http://dash.circularstudios.com/guides/">Home</a></li>
            <li class="nav-header">GUIDES</li>
            <li data-section="guides/gettingstarted"><a href="http://dash.circularstudios.com/guides/gettingstarted.html">Getting Started</a></li>
            <li data-section="guides/prefabs"><a href="http://dash.circularstudios.com/guides/prefabs.html">Prefabs</a></li>
            <li data-section="guides/scripts"><a href="http://dash.circularstudios.com/guides/scripts.html">Scripts</a></li>
            <li class="nav-header">SCHEMAS</li>
            <li data-section="guides/schemas/objects"><a href="http://dash.circularstudios.com/guides/schemas/objects.html">Objects</a></li>
            <li data-section="guides/schemas/materials"><a href="http://dash.circularstudios.com/guides/schemas/materials.html">Materials</a></li>
          </ul>
        </div>
        <div class="span9">
<h1>Prefabs</h1>

<hr>

<h3>Writing a Prefab</h3>

<p>Prefabs are YAML objects which allow you to easily create similar objects
without duplicating code. You can place as many prefabs in a file as you want,
as long as they are separated by a <code>---</code>. They must have a <code>Name</code> field,
and they may have any property that an object definition can have. An example
prefab file may look like this:</p>

<p><code>prefab1.yml</code></p>
<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="nn">---</span>
<span class="l-Scalar-Plain">Name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Prefab1</span>
<span class="l-Scalar-Plain">Material</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Mat1</span>
<span class="l-Scalar-Plain">Mesh</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">MyMesh2</span>
<span class="l-Scalar-Plain">PointLight</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">Color</span><span class="p-Indicator">:</span> <span class="kt">!Vector3</span> <span class="l-Scalar-Plain">1 1 1</span>
    <span class="l-Scalar-Plain">FalloffRadius</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0.5</span>
    <span class="l-Scalar-Plain">Brightness</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">1</span>
<span class="nn">---</span>
<span class="l-Scalar-Plain">Name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Prefab2</span>
<span class="l-Scalar-Plain">Mesh</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">MyMesh37</span>
<span class="l-Scalar-Plain">Material</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Mat62</span>
</code></pre></div>
<h3>Extending a Prefab from YAML</h3>

<p>Any <code>GameObject</code> defined by YAML can extend a prefab. To do so, simply add an
<code>InstanceOf</code> field to your object definition. Any field defined
in a prefab and an object will be overridden by the object. An example may look
like this:</p>

<p><code>object1.yml</code></p>
<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="nn">---</span>
<span class="l-Scalar-Plain">Name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Object1</span>
<span class="l-Scalar-Plain">InstaceOf</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Prefab1</span>
<span class="nn">---</span>
<span class="l-Scalar-Plain">Name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Object2</span>
<span class="l-Scalar-Plain">InstanceOf</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Prefab2</span>
<span class="l-Scalar-Plain">Mesh</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">MyMesh8</span>
</code></pre></div>
<h3>Instantiating a Prefab from Code</h3>

<p>To create an instance of a prefab from inside your D scripts, import
<code>core.prefabs</code> (or just <code>core</code>), and call to
<a href="/api/latest//core/prefabs/Prefab.createInstance.html"><code>Prefab.createInstance</code></a>.
An example script may look like this:</p>
<div class="highlight"><pre><code class="language-d" data-lang="d"><span class="p">...</span>
<span class="k">auto</span> <span class="n">newObj</span> <span class="p">=</span> <span class="n">Prefabs</span><span class="p">[</span><span class="s">&quot;BaseObj&quot;</span><span class="p">].</span><span class="n">createInstance</span><span class="p">();</span>
<span class="n">newObj</span><span class="p">.</span><span class="n">addComponent</span><span class="p">(</span> <span class="n">Assets</span><span class="p">.</span><span class="n">get</span><span class="p">!</span><span class="n">Mesh</span><span class="p">(</span> <span class="s">&quot;Mesh62&quot;</span> <span class="p">)</span> <span class="p">);</span>
<span class="p">...</span>
</code></pre></div>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="http://dash.circularstudios.com/assets/js/bootstrap.js"></script>
    <script>
      $( '#menu [data-section="guides/prefabs"]' ).addClass( 'active' );
    </script>
  </body>
</html>
